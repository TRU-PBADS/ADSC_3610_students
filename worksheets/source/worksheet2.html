
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Worksheet 2: Data modelling with MongoDB &#8212; ADSC 3610 - Database Systems in Applied Data Science II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'worksheets/source/worksheet2';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Worksheet 1: Introduction to noSQL databases and document model with MongoDB" href="worksheet1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../syllabus.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/TRU_Logo.png" class="logo__image only-light" alt="ADSC 3610 - Database Systems in Applied Data Science II - Home"/>
    <script>document.write(`<img src="../../_static/TRU_Logo.png" class="logo__image only-dark" alt="ADSC 3610 - Database Systems in Applied Data Science II - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../syllabus.html">
                    ADSC 3610 - Database Systems in Applied Data Science II - Syllabus
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures Notes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture1.html">Lecture 1: Introduction to Non-Relational Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture2.html">Lecture 2: Introduction to MongoDB and the document model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture3.html">Lecture 3: MongoDB Atlas and connecting to MongoDB database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture4.html">Lecture 4: Data modelling in MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture5.html">Lecture 5: Schema design patterns in MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture6.html">Lecture 6: CRUD operations in MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures/lecture7.html">Lecture 7: Aggregation operations in MongoDB</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Midterms Information</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../lectures/midterm1.html">Midterm instruction</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Installation Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../installation_mac.html">Installation instruction for macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation_windows.html">Installation instruction for Windows</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Worksheet solution</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="worksheet1.html">Worksheet 1: Introduction to noSQL databases and document model with MongoDB</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Worksheet 2: Data modelling with MongoDB</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/worksheets/source/worksheet2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Worksheet 2: Data modelling with MongoDB</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-identify-documents-and-collections">Exercise 1: Identify documents and collections</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-online-bookstore">Case Study: Online Bookstore</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step-instructions">Step-by-Step Instructions:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-identify-database-workload">Exercise 2: Identify database workload</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quantifying-reads-and-writes-in-the-online-bookstore-example">Quantifying Reads and Writes in the Online Bookstore Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-identifying-and-modeling-relationships-in-mongodb">Exercise 3: Identifying and Modeling Relationships in MongoDB</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-online-bookstore-continued">Case Study: Online Bookstore (Continued)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Objectives:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Step-by-Step Instructions:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example:</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#json-example">JSON Example:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission-instructions">Submission instructions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="worksheet-2-data-modelling-with-mongodb">
<h1>Worksheet 2: Data modelling with MongoDB<a class="headerlink" href="#worksheet-2-data-modelling-with-mongodb" title="Link to this heading">#</a></h1>
<section id="exercise-1-identify-documents-and-collections">
<h2>Exercise 1: Identify documents and collections<a class="headerlink" href="#exercise-1-identify-documents-and-collections" title="Link to this heading">#</a></h2>
<section id="case-study-online-bookstore">
<h3>Case Study: Online Bookstore<a class="headerlink" href="#case-study-online-bookstore" title="Link to this heading">#</a></h3>
<p>You are tasked with designing a MongoDB database for an online bookstore. The bookstore sells books, and each book can have multiple authors. Customers can purchase books, and each purchase can contain multiple books. Additionally, customers can leave reviews for books they have purchased.</p>
</section>
<section id="objectives">
<h3>Objectives:<a class="headerlink" href="#objectives" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Design the data model for the online bookstore.</p></li>
<li><p>Define the relationships between different entities.</p></li>
<li><p>Create sample documents for each collection.</p></li>
</ol>
</section>
<section id="step-by-step-instructions">
<h3>Step-by-Step Instructions:<a class="headerlink" href="#step-by-step-instructions" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p><strong>Identify Entities and Relationships:</strong></p>
<ul class="simple">
<li><p><strong>Books</strong>: Each book has a title, ISBN, publication date, and a list of authors.</p></li>
<li><p><strong>Authors</strong>: Each author has a name and a list of books they have written.</p></li>
<li><p><strong>Customers</strong>: Each customer has a name, email, and a list of purchases.</p></li>
<li><p><strong>Purchases</strong>: Each purchase has a date, customer reference, and a list of books purchased.</p></li>
<li><p><strong>Reviews</strong>: Each review has a rating, comment, customer reference, and book reference.</p></li>
</ul>
</li>
<li><p><strong>Design the Data Model:</strong></p>
<ul>
<li><p><strong>Books Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Da</span><span class="kc">te</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;authors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">]</span><span class="w">  </span><span class="c1">// References to Authors</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Authors Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">]</span><span class="w">  </span><span class="c1">// References to Books</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Customers Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;purchases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">]</span><span class="w">  </span><span class="c1">// References to Purchases</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Purchases Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Da</span><span class="kc">te</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span><span class="w">  </span><span class="c1">// Reference to Customer</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">]</span><span class="w">  </span><span class="c1">// References to Books</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Reviews Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rating&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Number</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;comment&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">S</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="p">,</span><span class="w">  </span><span class="c1">// Reference to Customer</span>
<span class="w">    </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id</span><span class="w">  </span><span class="c1">// Reference to Book</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Create Sample Documents:</strong></p>
<ul>
<li><p><strong>Books Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1a&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MongoDB Basics&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1234567890&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">ISODa</span><span class="kc">te</span><span class="err">(</span><span class="s2">&quot;2021-01-01T00:00:00Z&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;authors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1b&quot;</span><span class="err">)</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Authors Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1b&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1a&quot;</span><span class="err">)</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Customers Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1c&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jane.smith@example.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;purchases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1d&quot;</span><span class="err">)</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Purchases Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1d&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">ISODa</span><span class="kc">te</span><span class="err">(</span><span class="s2">&quot;2021-06-01T00:00:00Z&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1c&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1a&quot;</span><span class="err">)</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Reviews Collection</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1e&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rating&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;comment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Great book on MongoDB!&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1c&quot;</span><span class="err">)</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">Objec</span><span class="kc">t</span><span class="err">Id(</span><span class="s2">&quot;60c72b2f9b1d8b3a4c8e4d1a&quot;</span><span class="err">)</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</section>
</section>
<section id="exercise-2-identify-database-workload">
<h2>Exercise 2: Identify database workload<a class="headerlink" href="#exercise-2-identify-database-workload" title="Link to this heading">#</a></h2>
<p>In this exercise, you will extend your data modeling skills by identifying entities and attributes, quantifying entities, and analyzing read and write operations for different types of application users. You will also map these operations to application flows and quantify them.</p>
<section id="quantifying-reads-and-writes-in-the-online-bookstore-example">
<h3>Quantifying Reads and Writes in the Online Bookstore Example<a class="headerlink" href="#quantifying-reads-and-writes-in-the-online-bookstore-example" title="Link to this heading">#</a></h3>
<p>To quantify the read and write operations in the online bookstore example, we need to consider the different types of operations performed by various users (customers and admins) and the frequency of these operations.</p>
<p>Fill out the table below with possible operations by customers and admins and specify the estimated frequency, as well as whether it’s a read or write operations. You can make your own assumptions.</p>
<p>I have added one operation as an example.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Operation</p></th>
<th class="head text-center"><p>User Type</p></th>
<th class="head text-center"><p>Read/Write</p></th>
<th class="head text-center"><p>Frequency (per day)</p></th>
<th class="head text-center"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Browse Books</p></td>
<td class="text-center"><p>Customer</p></td>
<td class="text-center"><p>Read</p></td>
<td class="text-center"><p>100,000</p></td>
<td class="text-center"><p>Customers browsing the list of available books.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>View Book Details</p></td>
<td class="text-center"><p>Customer</p></td>
<td class="text-center"><p>Read</p></td>
<td class="text-center"><p>50,000</p></td>
<td class="text-center"><p>Customers viewing details (e.g., title, author, reviews) for specific books.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Add a new book</p></td>
<td class="text-center"><p>Admin</p></td>
<td class="text-center"><p>Write</p></td>
<td class="text-center"><p>5</p></td>
<td class="text-center"><p>Admin adding new books to the inventory</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Leave a Book Review</p></td>
<td class="text-center"><p>Customer</p></td>
<td class="text-center"><p>Write</p></td>
<td class="text-center"><p>5,000</p></td>
<td class="text-center"><p>Customers leaving reviews and ratings for purchased books.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Search for a Book</p></td>
<td class="text-center"><p>Customer</p></td>
<td class="text-center"><p>Read</p></td>
<td class="text-center"><p>80,000</p></td>
<td class="text-center"><p>Customers using search functionality to find books.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="exercise-3-identifying-and-modeling-relationships-in-mongodb">
<h2>Exercise 3: Identifying and Modeling Relationships in MongoDB<a class="headerlink" href="#exercise-3-identifying-and-modeling-relationships-in-mongodb" title="Link to this heading">#</a></h2>
<section id="case-study-online-bookstore-continued">
<h3>Case Study: Online Bookstore (Continued)<a class="headerlink" href="#case-study-online-bookstore-continued" title="Link to this heading">#</a></h3>
<p>In this exercise, you will identify one-to-one, one-to-many, and many-to-many relationships between entities in an online bookstore. You will analyze these entities to determine whether to embed or reference them using common guidelines. Finally, you will model these relationships using both embedded and referenced approaches.</p>
</section>
<section id="id1">
<h3>Objectives:<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Identify one-to-one, one-to-many, and many-to-many relationships between entities.</p></li>
<li><p>Analyze entities to determine whether to embed or reference using common guidelines.</p></li>
<li><p>Model embedded and referenced one-to-one, one-to-many, and many-to-many relationships.</p></li>
</ol>
</section>
<section id="id2">
<h3>Step-by-Step Instructions:<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>For each of the following pair of entities, identify:</p>
<ul class="simple">
<li><p>What type of relationships is there</p></li>
<li><p>Determine whether to use embedding or referencing</p></li>
<li><p>Give an example in JSON format</p></li>
</ul>
</section>
<section id="example">
<h3>Example:<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<p><strong>Entities: Books and Reviews</strong></p>
<ol class="arabic simple">
<li><p><strong>Type of Relationship:</strong> One-to-Many (e.g., one book has many reviews)</p></li>
<li><p><strong>Embed or Reference:</strong> Embed</p></li>
<li><p><strong>Explanation:</strong> Reviews are typically small in size and are frequently accessed together with the book details. Embedding reviews within the book document ensures that all related data can be retrieved in a single read operation, improving read performance.</p></li>
</ol>
<section id="json-example">
<h4>JSON Example:<a class="headerlink" href="#json-example" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="n">ObjectId</span><span class="p">(</span><span class="s2">&quot;bookId1&quot;</span><span class="p">),</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;MongoDB Basics&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ISBN&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reviews&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Great book on MongoDB!&quot;</span><span class="p">,</span>
            <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="n">ObjectId</span><span class="p">(</span><span class="s2">&quot;customerId1&quot;</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Very informative.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="n">ObjectId</span><span class="p">(</span><span class="s2">&quot;customerId2&quot;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p><strong>YOUR TURN</strong></p>
<p>For each of the following pairs of entities, identify the type of relationship, decide whether to use embedding or referencing, explain why, and provide a JSON example.</p>
<ol class="arabic simple">
<li><p><strong>Entities: Books and Authors</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong></p></li>
<li><p><strong>Embed or Reference:</strong></p></li>
<li><p><strong>Explanation:</strong></p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<blockquote>
<div><p>YOUR ANSWER HERE</p>
</div></blockquote>
<ol class="arabic simple">
<li><p><strong>Entities: Books and Authors</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong> Many-to-Many</p></li>
<li><p><strong>Embed or Reference:</strong> Embed for books, and embed for authors</p></li>
<li><p><strong>Explanation:</strong> Each book can have multiple authors, but each author can also write multiple books.</p></li>
<li><p>For the books collection, since the number of authors of each book is relatively small, we can directly embed authors information in the books collection. This will help users to retrieve information on authors while browsing a book faster.</p></li>
<li><p>For the authors collection, each authors can have multiple books, but the number of books that each author wrote over time is likely to be limited (e.g. each author has less than 20 books). Also, when people click on authors name, they will likely want to browse all the books written by that authors. So embedding here would make sense. Data that are accessed together, should stay together!</p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<p>Books collection (embedded authors)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Good Omens&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;978-0-06-085398-3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1990-05-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;authors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;author_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Neil Gaiman&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;author_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Terry Pratchett&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Authors collection (embed books)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;author_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;George Orwell&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_2&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1984&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;978-0-452-28423-4&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1949-06-08&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_3&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Animal Farm&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;978-0-452-28424-1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1945-08-17&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Entities: Customers and Purchases</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong></p></li>
<li><p><strong>Embed or Reference:</strong></p></li>
<li><p><strong>Explanation:</strong></p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<blockquote>
<div><p>YOUR ANSWER HERE</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>Entities: Customers and Purchases</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong> One-to-many</p></li>
<li><p><strong>Embed or Reference:</strong> We would reference purchase ID in the customers collection. The reason is that each customer can have a large number of purchases, embedding it would result in unbounded documents, extremly long json file and slow down querry time. So referencing would be a better choice here.</p></li>
<li><p><strong>Explanation:</strong> Each customer can have multiple purchases, but each purchase order belongs to only one customer</p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;customer_id_2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jane.smith@example.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;purchases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_2&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_100&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Entities: Books and Purchases</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong></p></li>
<li><p><strong>Embed or Reference:</strong></p></li>
<li><p><strong>Explanation:</strong></p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<blockquote>
<div><p>YOUR ANSWER HERE</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><strong>Entities: Books and Purchases</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong>: Many-to-many</p></li>
<li><p><strong>Embed or Reference:</strong></p></li>
<li><p><strong>Explanation:</strong> Each book can be purchased multiple times, each purchase order can have multiple books</p></li>
<li><p>For the books collection, we can reference the purchased id since we can have hundreds to millions of purchase orders for a single popular book (e.g. Harry Potter). This will also help with reducing data redundancy when we need to update some information about the purcharse order.</p></li>
<li><p>For the purchases collection, we can use embedding as we assume that most purchase order will contain only a small number of books. When we querry data about purchases, we most likely will always want to see the book information within the purchase order as well. Books information will unlikely to be changed/updated frequently, so there’s no concerns for data redundancy. Data that are accessed together, should stay together!</p></li>
<li><p><strong>JSON Example:</strong>
<strong>books collection</strong> (referencing purchase ids)</p></li>
</ul>
</li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ISBN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;978-0-590-35340-3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;publication_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1997-06-26&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;purchases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_2&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="err">...</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;purchase_id_100&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>purchase collection</strong> (embed books info)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;purchase_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;purchase_id_1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;customer_id_1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;books&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">8.99</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;book_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book_id_2&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The Hobbit&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">12.99</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Entities: Customers and Reviews</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong></p></li>
<li><p><strong>Embed or Reference:</strong></p></li>
<li><p><strong>Explanation:</strong></p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<blockquote>
<div><p>YOUR ANSWER HERE</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p><strong>Entities: Customers and Reviews</strong></p>
<ul class="simple">
<li><p><strong>Type of Relationship:</strong> One-to-many</p></li>
<li><p><strong>Embed or Reference:</strong> Reference reviews in customer collection</p></li>
<li><p><strong>Explanation:</strong> Each customer can write multiples reviews, each review belongs to a single customer. We should reference the reviews id in the customer collection because the number of reviews could get quite large, hence referencing would be suitable here. Also, if we think about the kind of operations that would querry the customer collection, it’s unlikely that we would need to show all the reviews that each customer made.</p></li>
<li><p><strong>JSON Example:</strong></p></li>
</ul>
</li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;customer_id_1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;john.doe@example.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;reviews&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;review_id_1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_2&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_6&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_7&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_8&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_9&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;review_id_10&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="submission-instructions">
<h2>Submission instructions<a class="headerlink" href="#submission-instructions" title="Link to this heading">#</a></h2>
<p>{rubric: mechanics = 5}</p>
<ul class="simple">
<li><p>Make sure the notebook can run from top to bottom without any error. Restart the kernel and run all cells.</p></li>
<li><p>Commit and push your notebook to the github repo</p></li>
<li><p>Double check your notebook is rendered properly on Github and you can see all the outputs clearly</p></li>
<li><p>Submit a URL to the github repo that contain this worksheet to Moodle</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./worksheets/source"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="worksheet1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Worksheet 1: Introduction to noSQL databases and document model with MongoDB</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-identify-documents-and-collections">Exercise 1: Identify documents and collections</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-online-bookstore">Case Study: Online Bookstore</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objectives">Objectives:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step-instructions">Step-by-Step Instructions:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-identify-database-workload">Exercise 2: Identify database workload</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quantifying-reads-and-writes-in-the-online-bookstore-example">Quantifying Reads and Writes in the Online Bookstore Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-identifying-and-modeling-relationships-in-mongodb">Exercise 3: Identifying and Modeling Relationships in MongoDB</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#case-study-online-bookstore-continued">Case Study: Online Bookstore (Continued)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Objectives:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Step-by-Step Instructions:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example:</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#json-example">JSON Example:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission-instructions">Submission instructions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Quan Nguyen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>